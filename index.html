<!DOCTYPE html>
<html lang="en">
  <head>
    <meta  content="user-scalable=no">
    <title>Lotus4ever</title>
    <link rel="icon" href="icon.png" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Press+Start+2P" />
    <link rel="stylesheet" href="styles.css" />
    <script>
      window.console = window.console || function (t) {};
    </script>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
  </head>

  <body translate="no">
  <div>  
    <div id="game">
      <div id="road">
        <div id="cloud"></div>
        <div id="hero"></div>
      </div>

      <div id="hud">
        <span id="time" class="topUI">0</span>
        <span id="score" class="topUI">0</span>
        <span id="lap" class="topUI">0'00"000</span>
        <span id="tacho">0</span>
      </div>

      <div id="home">
        <h2 id="welcomeText">Loading user data...</h2>
        <h1>Lotus4ever</h1>
        <p id="text"></p>

        <div id="highscore"></div>
      </div>
    </div>

    <div id="mobile_controls">
      <div class="row">
        <button class="left-button">&lt;</button>
         <button class="go-button">BREAK</button>
        <button class="right-button">&gt;</button>
      </div>
      <div class="row">
        <button class="mute-button">MUTE</button>
        <button class="start-button">PLAY</button>
        <button class="exit-button">EXIT</button>
      </div>
    </div>
  </div>

  <script src="javascript/1.js"></script>
  <script id="rendered-js" src="script.js"></script>
  <script src="javascript/null.js"></script>

  <script>
      const viewportWidth = window.innerWidth || document.documentElement.clientWidth;
      const viewportHeighth = window.innerHeight || document.documentElement.clientHeight;
      console.log('Viewport width:', viewportWidth);
      console.log('Viewport height:', viewportHeight);
      // Prevent default touch behaviors
      document.addEventListener('touchmove', function(event) {
        event.preventDefault();
      }, { passive: false });

      document.addEventListener('touchstart', function(event) {
        if (event.touches.length > 1) {
          event.preventDefault();
        }
      }, { passive: false });

      // Prevent double-tap to zoom
      let lastTouchEnd = 0;
      document.addEventListener('touchend', function(event) {
        const now = (new Date()).getTime();
        if (now - lastTouchEnd <= 300) {
          event.preventDefault();
        }
        lastTouchEnd = now;
      }, false);

      document.body.addEventListener('touchmove', function(event) {
        event.preventDefault();
      }, { passive: false });
    </script>

    <script>
document.addEventListener('DOMContentLoaded', function() {
    const tg = window.Telegram.WebApp;

    // Ensure the app is ready
    tg.ready();

    // Expand to full height
    tg.expand();

    // Listen for viewport changes
    tg.onEvent('viewportChanged', function() {
        adjustLayout(tg.viewportHeight);
    });

    function adjustLayout(height) {
        // Adjust your app's layout based on the new height
        document.getElementById('app-container').style.height = `${height}px`;
    }

    // Use Telegram's theme if available
    if (tg.colorScheme === 'dark') {
        document.body.classList.add('dark-theme');
    }

    // Get the current viewport information
    const viewportInfo = tg.viewportStableHeight;
    console.log('Viewport stable height:', viewportInfo);

    // Set up an event listener for viewport changes
    tg.onEvent('viewportChanged', function() {
        console.log('New viewport height:', tg.viewportHeight);
        console.log('Is expanded:', tg.isExpanded);
    }); 
        // Get user data (username, id, etc.)
        const user = tg.initDataUnsafe?.user;
  
        if (user) {
          const firstName = user.first_name || '';
          const lastName = user.last_name || '';
          const username = user.username || '';
          const userId = user.id;
  
          // Display the user data in your game or app
          document.getElementById('welcomeText').innerText = 
            `Welcome ${firstName} ${lastName} (@${username})!`;
        } else {
          document.getElementById('welcomeText').innerText = 'User data not available.';
        }
      });
    </script>

    <!-- Add this CSS style to fit the screen -->
  </body>
</html>
